# https://adventofcode.com/2024/day/20
# Day 20: Race Condition

from functools import *
from typing import Counter

def solve(data: str):
    A = {i + 1j * j: v for i, r in enumerate(data.split()) for j, v in enumerate(r)}
    S, E = (next(pos for pos, cell in A.items() if cell == ch) for ch in 'SE')
    def sssp(hi):
        bfs = [(0, S)]
        vis = {S}
        for d, u in bfs:
            if hi and d > hi:
                continue
            if u == E:
                return d
            for k in range(4):
                v = u + 1j ** k
                if A.get(v, '#') != '#' and v not in vis:
                    bfs.append((d + 1, v))
                    vis.add(v)
    best = sssp(0)
    yield best
    part1 = Counter()
    for z in A:
        if A[z] == '#':
            A[z] = '.'
            part1[sssp(best)] += 1
            A[z] = '#'
    yield sum(v for k, v in part1.items() if best - k >= 100)


def inputs():

    yield """
###############
#...#...#.....#
#.#.#.#.#.###.#
#S#...#.#.#...#
#######.#.#.###
#######.#.#...#
#######.#.###.#
###..E#...#...#
###.#######.###
#...###...#...#
#.#####.#.###.#
#.#...#.#.#...#
#.#.#.#.#.#.###
#...#...#...###
###############
"""

    yield """
#############################################################################################################################################
#...#.........#...#.....#...#...#.........#.......#...#.....#...#...#...#...#.....#.....###...#.............#...#...#.....###...###.........#
#.#.#.#######.#.#.#.###.#.#.#.#.#.#######.#.#####.#.#.#.###.#.#.#.#.#.#.#.#.#.###.#.###.###.#.#.###########.#.#.#.#.#.###.###.#.###.#######.#
#.#.#.......#...#.#...#.#.#.#.#.#.#.....#.#.....#.#.#.#...#.#.#.#.#.#.#.#.#.#.#...#.#...#...#.#.#...........#.#.#.#.#...#.#...#...#.....#...#
#.#.#######.#####.###.#.#.#.#.#.#.#.###.#.#####.#.#.#.###.#.#.#.#.#.#.#.#.#.#.#.###.#.###.###.#.#.###########.#.#.#.###.#.#.#####.#####.#.###
#.#.......#...#...###.#.#.#...#.#...###.#.#...#.#...#.###.#.#.#...#...#...#.#.#.###.#...#.#...#.#.#...#...###.#.#.#.#...#.#.#.....#...#.#...#
#.#######.###.#.#####.#.#.#####.#######.#.#.#.#.#####.###.#.#.#############.#.#.###.###.#.#.###.#.#.#.#.#.###.#.#.#.#.###.#.#.#####.#.#.###.#
#...#.....###.#...#...#...#.....#...#...#.#.#.#.....#.#...#.#.....#...#...#.#.#...#.#...#.#.#...#.#.#...#...#.#.#.#.#...#.#.#.#.....#...#...#
###.#.#######.###.#.#######.#####.#.#.###.#.#.#####.#.#.###.#####.#.#.#.#.#.#.###.#.#.###.#.#.###.#.#######.#.#.#.#.###.#.#.#.#.#########.###
#...#.....#...#...#.......#...#...#.#.#...#.#...#...#.#.#...#...#...#...#.#...#...#.#...#.#.#...#...#...#...#.#.#.#.#...#...#.#.#.........###
#.#######.#.###.#########.###.#.###.#.#.###.###.#.###.#.#.###.#.#########.#####.###.###.#.#.###.#####.#.#.###.#.#.#.#.#######.#.#.###########
#...#.....#.#...###...#...#...#...#.#.#.###.#...#...#...#.#...#...#.......#...#.#...#...#.#.###.#.....#...#...#.#.#.#...#.....#.#.....#.....#
###.#.#####.#.#####.#.#.###.#####.#.#.#.###.#.#####.#####.#.#####.#.#######.#.#.#.###.###.#.###.#.#########.###.#.#.###.#.#####.#####.#.###.#
#...#.......#.....#.#.#...#...###.#.#.#.#...#.#...#.....#.#.#.....#.#.......#.#.#...#...#.#...#.#.#.......#...#.#.#.#...#.......#.....#.#...#
#.###############.#.#.###.###.###.#.#.#.#.###.#.#.#####.#.#.#.#####.#.#######.#.###.###.#.###.#.#.#.#####.###.#.#.#.#.###########.#####.#.###
#.#.....#.....#...#.#...#.#...#...#.#.#.#...#...#...###.#...#.....#...#...#...#...#...#.#.#...#.#...#...#.#...#.#.#.#...#.......#.......#...#
#.#.###.#.###.#.###.###.#.#.###.###.#.#.###.#######.###.#########.#####.#.#.#####.###.#.#.#.###.#####.#.#.#.###.#.#.###.#.#####.###########.#
#.#.###...###.#.###.#...#.#.#...#...#.#.###.......#...#.......#...#...#.#...#...#...#.#.#.#.....#.....#...#.#...#.#...#.#.#...#...#.........#
#.#.#########.#.###.#.###.#.#.###.###.#.#########.###.#######.#.###.#.#.#####.#.###.#.#.#.#######.#########.#.###.###.#.#.#.#.###.#.#########
#.#.....#.....#.....#.#...#...#...#...#.#.....#...#...#.......#...#.#.#.......#...#...#.#.#.......#...###...#.###...#.#.#...#...#.#...#.....#
#.#####.#.###########.#.#######.###.###.#.###.#.###.###.#########.#.#.###########.#####.#.#.#######.#.###.###.#####.#.#.#######.#.###.#.###.#
#...#...#.......#...#.#.......#...#.#...#...#.#...#...#...#.......#.#.###.........#...#...#...#...#.#...#.#...#...#.#...#.......#.....#.#...#
###.#.#########.#.#.#.#######.###.#.#.#####.#.###.###.###.#.#######.#.###.#########.#.#######.#.#.#.###.#.#.###.#.#.#####.#############.#.###
###...#...#...#...#.#.........#...#.#.#.....#.#...#...#...#.#.......#...#.......#...#.....#...#.#.#...#.#.#...#.#.#.#.....#...#...#...#.#...#
#######.#.#.#.#####.###########.###.#.#.#####.#.###.###.###.#.#########.#######.#.#######.#.###.#.###.#.#.###.#.#.#.#.#####.#.#.#.#.#.#.###.#
#.....#.#.#.#.#...#...........#.###.#.#...#...#...#...#.#...#.#.........#...###...#.......#...#.#.....#...#...#.#.#.#.#...#.#.#.#.#.#...#...#
#.###.#.#.#.#.#.#.###########.#.###.#.###.#.#####.###.#.#.###.#.#########.#.#######.#########.#.###########.###.#.#.#.#.#.#.#.#.#.#.#####.###
#...#...#...#.#.#...###.......#...#.#.#...#.#...#...#.#.#...#.#.#...#.....#.....###.......#...#.#...........###.#...#...#...#...#...#...#...#
###.#########.#.###.###.#########.#.#.#.###.#.#.###.#.#.###.#.#.#.#.#.#########.#########.#.###.#.#############.#####################.#.###.#
###.........#.#...#...#.........#.#.#.#...#.#.#.#...#.#.#...#.#.#.#.#...#.......#.........#.#...#.....#...#...#.#.....#.....#...#...#.#.....#
###########.#.###.###.#########.#.#.#.###.#.#.#.#.###.#.#.###.#.#.#.###.#.#######.#########.#.#######.#.#.#.#.#.#.###.#.###.#.#.#.#.#.#######
#...#...#...#.....#...#...#...#.#.#.#.#...#.#.#...#...#.#...#.#...#.#...#.#...###.........#.#...#.....#.#...#...#...#.#...#.#.#.#.#.#...#...#
#.#.#.#.#.#########.###.#.#.#.#.#.#.#.#.###.#.#####.###.###.#.#####.#.###.#.#.###########.#.###.#.#####.###########.#.###.#.#.#.#.#.###.#.#.#
#.#.#.#.#.........#...#.#...#.#.#.#.#.#...#.#.....#.###...#.#.#.....#...#.#.#.#...###...#.#.###.#.#...#.#...........#.....#...#...#.#...#.#.#
#.#.#.#.#########.###.#.#####.#.#.#.#.###.#.#####.#.#####.#.#.#.#######.#.#.#.#.#.###.#.#.#.###.#.#.#.#.#.#########################.#.###.#.#
#.#.#.#.###...###.#...#.....#...#...#.#...#...#...#...#...#.#.#.#.....#.#.#.#.#.#...#.#...#.#...#.#.#.#.#.....###.................#...###.#.#
#.#.#.#.###.#.###.#.#######.#########.#.#####.#.#####.#.###.#.#.#.###.#.#.#.#.#.###.#.#####.#.###.#.#.#.#####.###.###############.#######.#.#
#.#...#...#.#.#...#.#...###.#.......#.#...#...#...#...#.###.#.#.#.#...#.#.#.#...#...#.###...#.###...#...#...#.....#...............#.....#.#.#
#.#######.#.#.#.###.#.#.###.#.#####.#.###.#.#####.#.###.###.#.#.#.#.###.#.#.#####.###.###.###.###########.#.#######.###############.###.#.#.#
#.......#...#.#.#...#.#...#...#...#.#...#.#.#...#.#.....#...#.#.#.#...#.#.#.....#...#...#.....#...........#.......#.....#...#.....#...#...#.#
#######.#####.#.#.###.###.#####.#.#.###.#.#.#.#.#.#######.###.#.#.###.#.#.#####.###.###.#######.#################.#####.#.#.#.###.###.#####.#
###...#.....#...#.#...#...###...#...###...#...#...#.......#...#.#...#.#.#.#...#.###...#.....#...#...#...........#.#.....#.#.#.#...#...#...#.#
###.#.#####.#####.#.###.#####.#####################.#######.###.###.#.#.#.#.#.#.#####.#####.#.###.#.#.#########.#.#.#####.#.#.#.###.###.#.#.#
#...#.....#...#...#...#.....#...#...###.........###...#...#.###.#...#...#...#...#.....#...#.#.....#.#.#.........#...###...#.#.#.....#...#.#.#
#.#######.###.#.#####.#####.###.#.#.###.#######.#####.#.#.#.###.#.###############.#####.#.#.#######.#.#.###############.###.#.#######.###.#.#
#.......#...#.#.......#.....###.#.#.....#...#...#.....#.#.#...#...###...........#.....#.#.#...###...#.#.....###...#...#.#...#.#.......###...#
#######.###.#.#########.#######.#.#######.#.#.###.#####.#.###.#######.#########.#####.#.#.###.###.###.#####.###.#.#.#.#.#.###.#.#############
#.......#...#.........#.#.....#...#...#...#.#.###...#...#...#...#...#.#.......#.#.....#.#...#...#...#.#.....#...#...#...#.....#.............#
#.#######.###########.#.#.###.#####.#.#.###.#.#####.#.#####.###.#.#.#.#.#####.#.#.#####.###.###.###.#.#.#####.#############################.#
#...#...#...###.....#.#.#.#...#...#.#...###...#.....#.....#...#...#...#.....#...#...#...###...#...#...#.......#...................#...#.....#
###.#.#.###.###.###.#.#.#.#.###.#.#.###########.#########.###.#############.#######.#.#######.###.#############.#################.#.#.#.#####
###...#...#...#...#...#...#...#.#.#.......#...#.....#.....###.#.....#.....#.......#...###...#.....###.......#...#...........#...#...#...#...#
#########.###.###.###########.#.#.#######.#.#.#####.#.#######.#.###.#.###.#######.#######.#.#########.#####.#.###.#########.#.#.#########.#.#
#.....###...#...#...........#...#.......#...#...###.#...#...#.#...#.#...#.#.....#.#.....#.#.###.......#...#...###.#.........#.#.###...###.#.#
#.###.#####.###.###########.###########.#######.###.###.#.#.#.###.#.###.#.#.###.#.#.###.#.#.###.#######.#.#######.#.#########.#.###.#.###.#.#
#...#.#...#...#.............#.........#.........#...#...#.#...#...#.#...#.#.###...#...#...#...#.........#.........#...#...#...#...#.#...#.#.#
###.#.#.#.###.###############.#######.###########.###.###.#####.###.#.###.#.#########.#######.#######################.#.#.#.#####.#.###.#.#.#
#...#.#.#.###...........#.....#.......#...###...#...#.###.#...#.###...###.#.#...#...#.......#.........................#.#.#.#.....#.#...#.#.#
#.###.#.#.#############.#.#####.#######.#.###.#.###.#.###.#.#.#.#########.#.#.#.#.#.#######.###########################.#.#.#.#####.#.###.#.#
#...#.#.#.#.............#.....#.#.......#.....#...#.#...#.#.#.#.....#...#...#.#...#.........#...........................#...#.......#.###.#.#
###.#.#.#.#.#################.#.#.###############.#.###.#.#.#.#####.#.#.#####.###############.#######################################.###.#.#
#...#...#...#...#.....#...#...#...#.....#...#.....#...#.#.#.#.#...#...#.#...#...#...#...#...#...#.................#.....#...#.......#.....#.#
#.###########.#.#.###.#.#.#.#######.###.#.#.#.#######.#.#.#.#.#.#.#####.#.#.###.#.#.#.#.#.#.###.#.###############.#.###.#.#.#.#####.#######.#
#.#.....#.....#.#.###.#.#...#.......###...#.#.......#...#...#.#.#.#...#.#.#.###...#...#...#.....#...............#.#...#...#...#.....#...#...#
#.#.###.#.#####.#.###.#.#####.#############.#######.#########.#.#.#.#.#.#.#.###################################.#.###.#########.#####.#.#.###
#...#...#...###.#.#...#.....#...#.........#.#.....#...#...###...#.#.#.#...#.#.........#...#.................#...#...#.........#.....#.#...###
#####.#####.###.#.#.#######.###.#.#######.#.#.###.###.#.#.#######.#.#.#####.#.#######.#.#.#.###############.#.#####.#########.#####.#.#######
#.....#...#...#.#.#.#...#...###...#...#...#.#.###...#...#...#.....#.#...#...#.......#.#.#.#.......#...#...#...#...#...#...#...#...#...#.....#
#.#####.#.###.#.#.#.#.#.#.#########.#.#.###.#.#####.#######.#.#####.###.#.#########.#.#.#.#######.#.#.#.#.#####.#.###.#.#.#.###.#.#####.###.#
#.#...#.#...#.#.#.#.#.#.#.#.........#...#...#.....#.#...#...#...#...#...#.#...#.....#...#.#.......#.#...#.......#...#...#.#.###.#...###.#...#
#.#.#.#.###.#.#.#.#.#.#.#.#.#############.#######.#.#.#.#.#####.#.###.###.#.#.#.#########.#.#######.###############.#####.#.###.###.###.#.###
#.#.#.#.#...#.#...#...#...#.............#.........#.#.#...#...#...###...#.#.#...#...#...#.#.........#.......#.....#.....#.#.....#...#...#...#
#.#.#.#.#.###.#########################.###########.#.#####.#.#########.#.#.#####.#.#.#.#.###########.#####.#.###.#####.#.#######.###.#####.#
#.#.#...#...#.#...#...###...............#.........#.#.......#.........#...#.......#...#.#.#...###...#.....#...###.#.....#.......#.###...#...#
#.#.#######.#.#.#.#.#.###.###############.#######.#.#################.#################.#.#.#.###.#.#####.#######.#.###########.#.#####.#.###
#.#.......#.#.#.#...#.....#.........#.....#.......#...#...........#...#.............#...#...#.#...#...###.......#...#...#.....#...#.....#...#
#.#######.#.#.#.###########.#######.#.#####.#########.#.#########.#.###.###########.#.#######.#.#####.#########.#####.#.#.###.#####.#######.#
#...#.....#...#...#.......#...#...#...#...#...#...###...#.....###...###...........#.#.......#.#.....#.........#...#...#...#...#.....#...#...#
###.#.###########.#.#####.###.#.#.#####.#.###.#.#.#######.###.###################.#.#######.#.#####.#########.###.#.#######.###.#####.#.#.###
#...#.#.......###...#.....#...#.#.......#...#...#...#...#.#...#########.........#.#.###.....#.#...#.........#...#...#.....#.....#.....#...###
#.###.#.#####.#######.#####.###.###########.#######.#.#.#.#.###########.#######.#.#.###.#####.#.#.#########.###.#####.###.#######.###########
#...#.#.....#.#.......#.....###.....###...#.........#.#.#.#...#########.......#...#.....#...#.#.#.#...#.....###.#...#...#...#...#...........#
###.#.#####.#.#.#######.###########.###.#.###########.#.#.###.###############.###########.#.#.#.#.#.#.#.#######.#.#.###.###.#.#.###########.#
###...#.....#...#...#...###.......#.....#.....#...#...#...#...###S#####.....#.............#.#...#...#.#.......#.#.#.#...###...#.#...........#
#######.#########.#.#.#####.#####.###########.#.#.#.#######.#####.#####.###.###############.#########.#######.#.#.#.#.#########.#.###########
#.......#...#...#.#...#...#.....#.#...........#.#...#...#...#####.#####.#...###...###.......#...#...#...#.....#...#...#.....#...#...........#
#.#######.#.#.#.#.#####.#.#####.#.#.###########.#####.#.#.#######.#####.#.#####.#.###.#######.#.#.#.###.#.#############.###.#.#############.#
#...#...#.#...#...#.....#.......#.#.............#...#.#...#######.#...#.#...#...#...#.......#.#.#.#...#...#.............#...#.....#.........#
###.#.#.#.#########.#############.###############.#.#.###########.#.#.#.###.#.#####.#######.#.#.#.###.#####.#############.#######.#.#########
###...#...###...###.............#.......#.........#...###########.#.#.#...#.#.....#.#.....#.#.#.#.#...#...#.#.......#...#.#.......#.........#
#############.#.###############.#######.#.#######################.#.#.###.#.#####.#.#.###.#.#.#.#.#.###.#.#.#.#####.#.#.#.#.###############.#
###...........#.....#...#...#...#.....#...#...#.....#############.#.#.#...#.#.....#...#...#...#...#.....#...#.....#...#...#...#.....#.......#
###.###############.#.#.#.#.#.###.###.#####.#.#.###.#############.#.#.#.###.#.#########.#########################.###########.#.###.#.#######
#...#...#...#.....#...#...#...#...#...#...#.#.#.#...#############.#.#.#.#...#.....#...#.#.....#...#.............#.......#...#.#.#...#.......#
#.###.#.#.#.#.###.#############.###.###.#.#.#.#.#.###############.#.#.#.#.#######.#.#.#.#.###.#.#.#.###########.#######.#.#.#.#.#.#########.#
#...#.#...#.#...#.....#...#...#...#.###.#.#.#.#.#.#.......#######.#.#...#.###...#.#.#...#.#...#.#.#...........#.#.......#.#.#...#.......#...#
###.#.#####.###.#####.#.#.#.#.###.#.###.#.#.#.#.#.#.#####.#######.#.#####.###.#.#.#.#####.#.###.#.###########.#.#.#######.#.###########.#.###
###...###...#...#...#...#...#.#...#...#.#.#.#.#.#...#.....#######...#.....#...#...#.....#.#...#.#.#...#.......#...#.......#.........###...###
#########.###.###.#.#########.#.#####.#.#.#.#.#.#####.###############.#####.###########.#.###.#.#.#.#.#.###########.###############.#########
#.........#...#...#...........#.#.....#.#.#.#...#.....#...###########.#...#.........#...#...#.#.#.#.#.#...#...#...#.#...............#.......#
#.#########.###.###############.#.#####.#.#.#####.#####.#.###########.#.#.#########.#.#####.#.#.#.#.#.###.#.#.#.#.#.#.###############.#####.#
#.#.........###.........#.....#.#...#...#...#.....#...#.#...#########...#...#...#...#...#...#.#.#.#.#.#...#.#...#...#.............###.#.....#
#.#.###################.#.###.#.###.#.#######.#####.#.#.###.###############.#.#.#.#####.#.###.#.#.#.#.#.###.#####################.###.#.#####
#.#.#.............#.....#.###...###.#.....#...#...#.#.#.#...#...#########...#.#.#...#...#...#.#.#.#.#.#.....#...#.................#...#.....#
#.#.#.###########.#.#####.#########.#####.#.###.#.#.#.#.#.###.#.#########.###.#.###.#.#####.#.#.#.#.#.#######.#.#.#################.#######.#
#...#...#.......#...#.....#.........#...#.#.#...#.#.#.#.#.#...#.#...#..E#.#...#.#...#.#...#.#.#.#...#...#.....#...###...............#.....#.#
#######.#.#####.#####.#####.#########.#.#.#.#.###.#.#.#.#.#.###.#.#.#.###.#.###.#.###.#.#.#.#.#.#######.#.###########.###############.###.#.#
#...###.#.#.....#...#.#.....#.......#.#.#.#.#...#.#.#.#.#.#.#...#.#...###.#...#.#.#...#.#.#.#.#.###.....#.............#...........#...###...#
#.#.###.#.#.#####.#.#.#.#####.#####.#.#.#.#.###.#.#.#.#.#.#.#.###.#######.###.#.#.#.###.#.#.#.#.###.###################.#########.#.#########
#.#.#...#.#...#...#...#.......#...#.#.#...#...#.#.#.#...#.#.#...#.....#...#...#.#.#...#.#.#.#.#...#...#...#...#...#...#.........#.#.#.......#
#.#.#.###.###.#.###############.#.#.#.#######.#.#.#.#####.#.###.#####.#.###.###.#.###.#.#.#.#.###.###.#.#.#.#.#.#.#.#.#########.#.#.#.#####.#
#.#.#...#.#...#.#...#...........#...#...#...#...#.#...#...#...#.#...#.#.#...#...#.#...#.#.#.#.#...#...#.#.#.#.#.#...#.#...#.....#...#.#.....#
#.#.###.#.#.###.#.#.#.#################.#.#.#####.###.#.#####.#.#.#.#.#.#.###.###.#.###.#.#.#.#.###.###.#.#.#.#.#####.#.#.#.#########.#.#####
#.#...#.#.#.....#.#...#...............#...#.#.....#...#.#...#.#.#.#.#.#...#...#...#...#.#.#.#.#...#...#.#.#.#.#...###...#...###...###.#.#...#
#.###.#.#.#######.#####.#############.#####.#.#####.###.#.#.#.#.#.#.#.#####.###.#####.#.#.#.#.###.###.#.#.#.#.###.#############.#.###.#.#.#.#
#...#.#...#...###...#...#.............#.....#.....#.###.#.#...#.#.#...#.....#...###...#.#.#.#...#...#.#.#.#.#...#.........#...#.#.....#...#.#
###.#.#####.#.#####.#.###.#############.#########.#.###.#.#####.#.#####.#####.#####.###.#.#.###.###.#.#.#.#.###.#########.#.#.#.###########.#
#...#...#...#.......#...#...#...#...#...#.........#...#.#.#.....#.#...#...#...#...#.....#...#...#...#...#...#...#...#...#...#...#...#.......#
#.#####.#.#############.###.#.#.#.#.#.###.###########.#.#.#.#####.#.#.###.#.###.#.###########.###.###########.###.#.#.#.#########.#.#.#######
#.#...#...#.........#...#...#.#.#.#.#...#...#.....#...#.#.#.#...#...#...#.#.....#.....###...#.#...#...#...###...#.#.#.#...#.......#.#.....###
#.#.#.#####.#######.#.###.###.#.#.#.###.###.#.###.#.###.#.#.#.#.#######.#.###########.###.#.#.#.###.#.#.#.#####.#.#.#.###.#.#######.#####.###
#...#.....#.#.....#.#.###...#.#...#.#...#...#...#.#.#...#.#...#...#...#.#.#...#.....#.#...#...#.....#...#.....#.#.#.#...#.#.......#.#...#...#
#########.#.#.###.#.#.#####.#.#####.#.###.#####.#.#.#.###.#######.#.#.#.#.#.#.#.###.#.#.#####################.#.#.#.###.#.#######.#.#.#.###.#
#...###...#.#...#...#...###...#.....#...#.#...#.#.#.#.#...#.......#.#...#.#.#...#...#.#.#...#...#.....#...#...#.#.#.#...#...#...#.#.#.#.#...#
#.#.###.###.###.#######.#######.#######.#.#.#.#.#.#.#.#.###.#######.#####.#.#####.###.#.#.#.#.#.#.###.#.#.#.###.#.#.#.#####.#.#.#.#.#.#.#.###
#.#.....#...###...#.....#.......#...#...#.#.#...#...#.#...#...#...#.....#.#...###...#.#.#.#...#.#.###.#.#...###.#.#.#...#...#.#...#...#.#...#
#.#######.#######.#.#####.#######.#.#.###.#.#########.###.###.#.#.#####.#.###.#####.#.#.#.#####.#.###.#.#######.#.#.###.#.###.#########.###.#
#.#.....#.#.......#.....#.....#...#.#...#.#.........#...#.#...#.#...#...#.....#...#...#...###...#...#.#.###.....#.#.....#...#...#...###.#...#
#.#.###.#.#.###########.#####.#.###.###.#.#########.###.#.#.###.###.#.#########.#.###########.#####.#.#.###.#####.#########.###.#.#.###.#.###
#.#.#...#.#.#...#...#...###...#.#...#...#...#.....#.###...#...#.###.#.......###.#...........#...#...#.#...#.#...#...###...#...#...#...#.#...#
#.#.#.###.#.#.#.#.#.#.#####.###.#.###.#####.#.###.#.#########.#.###.#######.###.###########.###.#.###.###.#.#.#.###.###.#.###.#######.#.###.#
#...#.....#.#.#.#.#.#.#.....#...#...#.....#...#...#...###...#...#...#.....#.....#.....#...#.###.#.###.#...#...#...#.....#.###.....#...#.....#
###########.#.#.#.#.#.#.#####.#####.#####.#####.#####.###.#.#####.###.###.#######.###.#.#.#.###.#.###.#.#########.#######.#######.#.#########
#...........#.#.#.#.#.#.....#...#...#...#.....#.....#...#.#.....#...#...#.#...#...#...#.#.#.#...#...#.#.###.....#...#...#...#.....#.........#
#.###########.#.#.#.#.#####.###.#.###.#.#####.#####.###.#.#####.###.###.#.#.#.#.###.###.#.#.#.#####.#.#.###.###.###.#.#.###.#.#############.#
#...#.....#...#.#.#.#.#.....#...#.#...#...#...#...#.....#.....#.....#...#.#.#.#...#.#...#...#...#...#.#...#.#...#...#.#.#...#.#...#.....#...#
###.#.###.#.###.#.#.#.#.#####.###.#.#####.#.###.#.###########.#######.###.#.#.###.#.#.#########.#.###.###.#.#.###.###.#.#.###.#.#.#.###.#.###
#...#.#...#...#.#.#.#.#.#...#...#.#.#.....#.....#...#.........#.....#...#.#.#.#...#.#.#.........#...#...#...#.#...#...#.#.#...#.#.#.#...#...#
#.###.#.#####.#.#.#.#.#.#.#.###.#.#.#.#############.#.#########.###.###.#.#.#.#.###.#.#.###########.###.#####.#.###.###.#.#.###.#.#.#.#####.#
#.....#.......#...#...#...#.....#...#...............#...........###.....#...#...###...#.............###.......#.....###...#.....#...#.......#
#############################################################################################################################################
"""


from itertools import accumulate
from time import time
start = time()
for data in inputs():
    print(*solve(data.strip()))
print(f"Elapsed time: {time() - start:.2f} seconds")
