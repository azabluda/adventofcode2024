# https://adventofcode.com/2024/day/20
# Day 20: Race Condition

def solve(K: int, data: str):
    A = {i + 1j * j: v for i, r in enumerate(data.split()) for j, v in enumerate(r)}
    S, E = (next(pos for pos, cell in A.items() if cell == ch) for ch in 'SE')
    bfs = [[S]]
    dst = {S:0}
    for p in bfs:
        if p[-1] == E:
            break
        for k in range(4):
            z = p[-1] + 1j ** k
            if A.get(z, '#') != '#' and z not in dst:
                bfs.append(p + [z])
                dst[z] = len(p) + 1
    for n in 2, 20:
        res = 0
        for z in p:
            for i in range(-n, n + 1):
                m = n - abs(i)
                for j in range(-m, m + 1):
                    y = z + i + 1j * j
                    res += A.get(y, '#') != '#' and dst[y] - dst[z] - abs(i) - abs(j) >= K
        print(f'dist saving >= {K},\tmax cheat time {n} ps\t: {res}')


def inputs():

    yield 50, """
###############
#...#...#.....#
#.#.#.#.#.###.#
#S#...#.#.#...#
#######.#.#.###
#######.#.#...#
#######.#.###.#
###..E#...#...#
###.#######.###
#...###...#...#
#.#####.#.###.#
#.#...#.#.#...#
#.#.#.#.#.#.###
#...#...#...###
###############
"""

    yield 100, """
#############################################################################################################################################
#...#.........#...#.....#...#...#.........#.......#...#.....#...#...#...#...#.....#.....###...#.............#...#...#.....###...###.........#
#.#.#.#######.#.#.#.###.#.#.#.#.#.#######.#.#####.#.#.#.###.#.#.#.#.#.#.#.#.#.###.#.###.###.#.#.###########.#.#.#.#.#.###.###.#.###.#######.#
#.#.#.......#...#.#...#.#.#.#.#.#.#.....#.#.....#.#.#.#...#.#.#.#.#.#.#.#.#.#.#...#.#...#...#.#.#...........#.#.#.#.#...#.#...#...#.....#...#
#.#.#######.#####.###.#.#.#.#.#.#.#.###.#.#####.#.#.#.###.#.#.#.#.#.#.#.#.#.#.#.###.#.###.###.#.#.###########.#.#.#.###.#.#.#####.#####.#.###
#.#.......#...#...###.#.#.#...#.#...###.#.#...#.#...#.###.#.#.#...#...#...#.#.#.###.#...#.#...#.#.#...#...###.#.#.#.#...#.#.#.....#...#.#...#
#.#######.###.#.#####.#.#.#####.#######.#.#.#.#.#####.###.#.#.#############.#.#.###.###.#.#.###.#.#.#.#.#.###.#.#.#.#.###.#.#.#####.#.#.###.#
#...#.....###.#...#...#...#.....#...#...#.#.#.#.....#.#...#.#.....#...#...#.#.#...#.#...#.#.#...#.#.#...#...#.#.#.#.#...#.#.#.#.....#...#...#
###.#.#######.###.#.#######.#####.#.#.###.#.#.#####.#.#.###.#####.#.#.#.#.#.#.###.#.#.###.#.#.###.#.#######.#.#.#.#.###.#.#.#.#.#########.###
#...#.....#...#...#.......#...#...#.#.#...#.#...#...#.#.#...#...#...#...#.#...#...#.#...#.#.#...#...#...#...#.#.#.#.#...#...#.#.#.........###
#.#######.#.###.#########.###.#.###.#.#.###.###.#.###.#.#.###.#.#########.#####.###.###.#.#.###.#####.#.#.###.#.#.#.#.#######.#.#.###########
#...#.....#.#...###...#...#...#...#.#.#.###.#...#...#...#.#...#...#.......#...#.#...#...#.#.###.#.....#...#...#.#.#.#...#.....#.#.....#.....#
###.#.#####.#.#####.#.#.###.#####.#.#.#.###.#.#####.#####.#.#####.#.#######.#.#.#.###.###.#.###.#.#########.###.#.#.###.#.#####.#####.#.###.#
#...#.......#.....#.#.#...#...###.#.#.#.#...#.#...#.....#.#.#.....#.#.......#.#.#...#...#.#...#.#.#.......#...#.#.#.#...#.......#.....#.#...#
#.###############.#.#.###.###.###.#.#.#.#.###.#.#.#####.#.#.#.#####.#.#######.#.###.###.#.###.#.#.#.#####.###.#.#.#.#.###########.#####.#.###
#.#.....#.....#...#.#...#.#...#...#.#.#.#...#...#...###.#...#.....#...#...#...#...#...#.#.#...#.#...#...#.#...#.#.#.#...#.......#.......#...#
#.#.###.#.###.#.###.###.#.#.###.###.#.#.###.#######.###.#########.#####.#.#.#####.###.#.#.#.###.#####.#.#.#.###.#.#.###.#.#####.###########.#
#.#.###...###.#.###.#...#.#.#...#...#.#.###.......#...#.......#...#...#.#...#...#...#.#.#.#.....#.....#...#.#...#.#...#.#.#...#...#.........#
#.#.#########.#.###.#.###.#.#.###.###.#.#########.###.#######.#.###.#.#.#####.#.###.#.#.#.#######.#########.#.###.###.#.#.#.#.###.#.#########
#.#.....#.....#.....#.#...#...#...#...#.#.....#...#...#.......#...#.#.#.......#...#...#.#.#.......#...###...#.###...#.#.#...#...#.#...#.....#
#.#####.#.###########.#.#######.###.###.#.###.#.###.###.#########.#.#.###########.#####.#.#.#######.#.###.###.#####.#.#.#######.#.###.#.###.#
#...#...#.......#...#.#.......#...#.#...#...#.#...#...#...#.......#.#.###.........#...#...#...#...#.#...#.#...#...#.#...#.......#.....#.#...#
###.#.#########.#.#.#.#######.###.#.#.#####.#.###.###.###.#.#######.#.###.#########.#.#######.#.#.#.###.#.#.###.#.#.#####.#############.#.###
###...#...#...#...#.#.........#...#.#.#.....#.#...#...#...#.#.......#...#.......#...#.....#...#.#.#...#.#.#...#.#.#.#.....#...#...#...#.#...#
#######.#.#.#.#####.###########.###.#.#.#####.#.###.###.###.#.#########.#######.#.#######.#.###.#.###.#.#.###.#.#.#.#.#####.#.#.#.#.#.#.###.#
#.....#.#.#.#.#...#...........#.###.#.#...#...#...#...#.#...#.#.........#...###...#.......#...#.#.....#...#...#.#.#.#.#...#.#.#.#.#.#...#...#
#.###.#.#.#.#.#.#.###########.#.###.#.###.#.#####.###.#.#.###.#.#########.#.#######.#########.#.###########.###.#.#.#.#.#.#.#.#.#.#.#####.###
#...#...#...#.#.#...###.......#...#.#.#...#.#...#...#.#.#...#.#.#...#.....#.....###.......#...#.#...........###.#...#...#...#...#...#...#...#
###.#########.#.###.###.#########.#.#.#.###.#.#.###.#.#.###.#.#.#.#.#.#########.#########.#.###.#.#############.#####################.#.###.#
###.........#.#...#...#.........#.#.#.#...#.#.#.#...#.#.#...#.#.#.#.#...#.......#.........#.#...#.....#...#...#.#.....#.....#...#...#.#.....#
###########.#.###.###.#########.#.#.#.###.#.#.#.#.###.#.#.###.#.#.#.###.#.#######.#########.#.#######.#.#.#.#.#.#.###.#.###.#.#.#.#.#.#######
#...#...#...#.....#...#...#...#.#.#.#.#...#.#.#...#...#.#...#.#...#.#...#.#...###.........#.#...#.....#.#...#...#...#.#...#.#.#.#.#.#...#...#
#.#.#.#.#.#########.###.#.#.#.#.#.#.#.#.###.#.#####.###.###.#.#####.#.###.#.#.###########.#.###.#.#####.###########.#.###.#.#.#.#.#.###.#.#.#
#.#.#.#.#.........#...#.#...#.#.#.#.#.#...#.#.....#.###...#.#.#.....#...#.#.#.#...###...#.#.###.#.#...#.#...........#.....#...#...#.#...#.#.#
#.#.#.#.#########.###.#.#####.#.#.#.#.###.#.#####.#.#####.#.#.#.#######.#.#.#.#.#.###.#.#.#.###.#.#.#.#.#.#########################.#.###.#.#
#.#.#.#.###...###.#...#.....#...#...#.#...#...#...#...#...#.#.#.#.....#.#.#.#.#.#...#.#...#.#...#.#.#.#.#.....###.................#...###.#.#
#.#.#.#.###.#.###.#.#######.#########.#.#####.#.#####.#.###.#.#.#.###.#.#.#.#.#.###.#.#####.#.###.#.#.#.#####.###.###############.#######.#.#
#.#...#...#.#.#...#.#...###.#.......#.#...#...#...#...#.###.#.#.#.#...#.#.#.#...#...#.###...#.###...#...#...#.....#...............#.....#.#.#
#.#######.#.#.#.###.#.#.###.#.#####.#.###.#.#####.#.###.###.#.#.#.#.###.#.#.#####.###.###.###.###########.#.#######.###############.###.#.#.#
#.......#...#.#.#...#.#...#...#...#.#...#.#.#...#.#.....#...#.#.#.#...#.#.#.....#...#...#.....#...........#.......#.....#...#.....#...#...#.#
#######.#####.#.#.###.###.#####.#.#.###.#.#.#.#.#.#######.###.#.#.###.#.#.#####.###.###.#######.#################.#####.#.#.#.###.###.#####.#
###...#.....#...#.#...#...###...#...###...#...#...#.......#...#.#...#.#.#.#...#.###...#.....#...#...#...........#.#.....#.#.#.#...#...#...#.#
###.#.#####.#####.#.###.#####.#####################.#######.###.###.#.#.#.#.#.#.#####.#####.#.###.#.#.#########.#.#.#####.#.#.#.###.###.#.#.#
#...#.....#...#...#...#.....#...#...###.........###...#...#.###.#...#...#...#...#.....#...#.#.....#.#.#.........#...###...#.#.#.....#...#.#.#
#.#######.###.#.#####.#####.###.#.#.###.#######.#####.#.#.#.###.#.###############.#####.#.#.#######.#.#.###############.###.#.#######.###.#.#
#.......#...#.#.......#.....###.#.#.....#...#...#.....#.#.#...#...###...........#.....#.#.#...###...#.#.....###...#...#.#...#.#.......###...#
#######.###.#.#########.#######.#.#######.#.#.###.#####.#.###.#######.#########.#####.#.#.###.###.###.#####.###.#.#.#.#.#.###.#.#############
#.......#...#.........#.#.....#...#...#...#.#.###...#...#...#...#...#.#.......#.#.....#.#...#...#...#.#.....#...#...#...#.....#.............#
#.#######.###########.#.#.###.#####.#.#.###.#.#####.#.#####.###.#.#.#.#.#####.#.#.#####.###.###.###.#.#.#####.#############################.#
#...#...#...###.....#.#.#.#...#...#.#...###...#.....#.....#...#...#...#.....#...#...#...###...#...#...#.......#...................#...#.....#
###.#.#.###.###.###.#.#.#.#.###.#.#.###########.#########.###.#############.#######.#.#######.###.#############.#################.#.#.#.#####
###...#...#...#...#...#...#...#.#.#.......#...#.....#.....###.#.....#.....#.......#...###...#.....###.......#...#...........#...#...#...#...#
#########.###.###.###########.#.#.#######.#.#.#####.#.#######.#.###.#.###.#######.#######.#.#########.#####.#.###.#########.#.#.#########.#.#
#.....###...#...#...........#...#.......#...#...###.#...#...#.#...#.#...#.#.....#.#.....#.#.###.......#...#...###.#.........#.#.###...###.#.#
#.###.#####.###.###########.###########.#######.###.###.#.#.#.###.#.###.#.#.###.#.#.###.#.#.###.#######.#.#######.#.#########.#.###.#.###.#.#
#...#.#...#...#.............#.........#.........#...#...#.#...#...#.#...#.#.###...#...#...#...#.........#.........#...#...#...#...#.#...#.#.#
###.#.#.#.###.###############.#######.###########.###.###.#####.###.#.###.#.#########.#######.#######################.#.#.#.#####.#.###.#.#.#
#...#.#.#.###...........#.....#.......#...###...#...#.###.#...#.###...###.#.#...#...#.......#.........................#.#.#.#.....#.#...#.#.#
#.###.#.#.#############.#.#####.#######.#.###.#.###.#.###.#.#.#.#########.#.#.#.#.#.#######.###########################.#.#.#.#####.#.###.#.#
#...#.#.#.#.............#.....#.#.......#.....#...#.#...#.#.#.#.....#...#...#.#...#.........#...........................#...#.......#.###.#.#
###.#.#.#.#.#################.#.#.###############.#.###.#.#.#.#####.#.#.#####.###############.#######################################.###.#.#
#...#...#...#...#.....#...#...#...#.....#...#.....#...#.#.#.#.#...#...#.#...#...#...#...#...#...#.................#.....#...#.......#.....#.#
#.###########.#.#.###.#.#.#.#######.###.#.#.#.#######.#.#.#.#.#.#.#####.#.#.###.#.#.#.#.#.#.###.#.###############.#.###.#.#.#.#####.#######.#
#.#.....#.....#.#.###.#.#...#.......###...#.#.......#...#...#.#.#.#...#.#.#.###...#...#...#.....#...............#.#...#...#...#.....#...#...#
#.#.###.#.#####.#.###.#.#####.#############.#######.#########.#.#.#.#.#.#.#.###################################.#.###.#########.#####.#.#.###
#...#...#...###.#.#...#.....#...#.........#.#.....#...#...###...#.#.#.#...#.#.........#...#.................#...#...#.........#.....#.#...###
#####.#####.###.#.#.#######.###.#.#######.#.#.###.###.#.#.#######.#.#.#####.#.#######.#.#.#.###############.#.#####.#########.#####.#.#######
#.....#...#...#.#.#.#...#...###...#...#...#.#.###...#...#...#.....#.#...#...#.......#.#.#.#.......#...#...#...#...#...#...#...#...#...#.....#
#.#####.#.###.#.#.#.#.#.#.#########.#.#.###.#.#####.#######.#.#####.###.#.#########.#.#.#.#######.#.#.#.#.#####.#.###.#.#.#.###.#.#####.###.#
#.#...#.#...#.#.#.#.#.#.#.#.........#...#...#.....#.#...#...#...#...#...#.#...#.....#...#.#.......#.#...#.......#...#...#.#.###.#...###.#...#
#.#.#.#.###.#.#.#.#.#.#.#.#.#############.#######.#.#.#.#.#####.#.###.###.#.#.#.#########.#.#######.###############.#####.#.###.###.###.#.###
#.#.#.#.#...#.#...#...#...#.............#.........#.#.#...#...#...###...#.#.#...#...#...#.#.........#.......#.....#.....#.#.....#...#...#...#
#.#.#.#.#.###.#########################.###########.#.#####.#.#########.#.#.#####.#.#.#.#.###########.#####.#.###.#####.#.#######.###.#####.#
#.#.#...#...#.#...#...###...............#.........#.#.......#.........#...#.......#...#.#.#...###...#.....#...###.#.....#.......#.###...#...#
#.#.#######.#.#.#.#.#.###.###############.#######.#.#################.#################.#.#.#.###.#.#####.#######.#.###########.#.#####.#.###
#.#.......#.#.#.#...#.....#.........#.....#.......#...#...........#...#.............#...#...#.#...#...###.......#...#...#.....#...#.....#...#
#.#######.#.#.#.###########.#######.#.#####.#########.#.#########.#.###.###########.#.#######.#.#####.#########.#####.#.#.###.#####.#######.#
#...#.....#...#...#.......#...#...#...#...#...#...###...#.....###...###...........#.#.......#.#.....#.........#...#...#...#...#.....#...#...#
###.#.###########.#.#####.###.#.#.#####.#.###.#.#.#######.###.###################.#.#######.#.#####.#########.###.#.#######.###.#####.#.#.###
#...#.#.......###...#.....#...#.#.......#...#...#...#...#.#...#########.........#.#.###.....#.#...#.........#...#...#.....#.....#.....#...###
#.###.#.#####.#######.#####.###.###########.#######.#.#.#.#.###########.#######.#.#.###.#####.#.#.#########.###.#####.###.#######.###########
#...#.#.....#.#.......#.....###.....###...#.........#.#.#.#...#########.......#...#.....#...#.#.#.#...#.....###.#...#...#...#...#...........#
###.#.#####.#.#.#######.###########.###.#.###########.#.#.###.###############.###########.#.#.#.#.#.#.#.#######.#.#.###.###.#.#.###########.#
###...#.....#...#...#...###.......#.....#.....#...#...#...#...###S#####.....#.............#.#...#...#.#.......#.#.#.#...###...#.#...........#
#######.#########.#.#.#####.#####.###########.#.#.#.#######.#####.#####.###.###############.#########.#######.#.#.#.#.#########.#.###########
#.......#...#...#.#...#...#.....#.#...........#.#...#...#...#####.#####.#...###...###.......#...#...#...#.....#...#...#.....#...#...........#
#.#######.#.#.#.#.#####.#.#####.#.#.###########.#####.#.#.#######.#####.#.#####.#.###.#######.#.#.#.###.#.#############.###.#.#############.#
#...#...#.#...#...#.....#.......#.#.............#...#.#...#######.#...#.#...#...#...#.......#.#.#.#...#...#.............#...#.....#.........#
###.#.#.#.#########.#############.###############.#.#.###########.#.#.#.###.#.#####.#######.#.#.#.###.#####.#############.#######.#.#########
###...#...###...###.............#.......#.........#...###########.#.#.#...#.#.....#.#.....#.#.#.#.#...#...#.#.......#...#.#.......#.........#
#############.#.###############.#######.#.#######################.#.#.###.#.#####.#.#.###.#.#.#.#.#.###.#.#.#.#####.#.#.#.#.###############.#
###...........#.....#...#...#...#.....#...#...#.....#############.#.#.#...#.#.....#...#...#...#...#.....#...#.....#...#...#...#.....#.......#
###.###############.#.#.#.#.#.###.###.#####.#.#.###.#############.#.#.#.###.#.#########.#########################.###########.#.###.#.#######
#...#...#...#.....#...#...#...#...#...#...#.#.#.#...#############.#.#.#.#...#.....#...#.#.....#...#.............#.......#...#.#.#...#.......#
#.###.#.#.#.#.###.#############.###.###.#.#.#.#.#.###############.#.#.#.#.#######.#.#.#.#.###.#.#.#.###########.#######.#.#.#.#.#.#########.#
#...#.#...#.#...#.....#...#...#...#.###.#.#.#.#.#.#.......#######.#.#...#.###...#.#.#...#.#...#.#.#...........#.#.......#.#.#...#.......#...#
###.#.#####.###.#####.#.#.#.#.###.#.###.#.#.#.#.#.#.#####.#######.#.#####.###.#.#.#.#####.#.###.#.###########.#.#.#######.#.###########.#.###
###...###...#...#...#...#...#.#...#...#.#.#.#.#.#...#.....#######...#.....#...#...#.....#.#...#.#.#...#.......#...#.......#.........###...###
#########.###.###.#.#########.#.#####.#.#.#.#.#.#####.###############.#####.###########.#.###.#.#.#.#.#.###########.###############.#########
#.........#...#...#...........#.#.....#.#.#.#...#.....#...###########.#...#.........#...#...#.#.#.#.#.#...#...#...#.#...............#.......#
#.#########.###.###############.#.#####.#.#.#####.#####.#.###########.#.#.#########.#.#####.#.#.#.#.#.###.#.#.#.#.#.#.###############.#####.#
#.#.........###.........#.....#.#...#...#...#.....#...#.#...#########...#...#...#...#...#...#.#.#.#.#.#...#.#...#...#.............###.#.....#
#.#.###################.#.###.#.###.#.#######.#####.#.#.###.###############.#.#.#.#####.#.###.#.#.#.#.#.###.#####################.###.#.#####
#.#.#.............#.....#.###...###.#.....#...#...#.#.#.#...#...#########...#.#.#...#...#...#.#.#.#.#.#.....#...#.................#...#.....#
#.#.#.###########.#.#####.#########.#####.#.###.#.#.#.#.#.###.#.#########.###.#.###.#.#####.#.#.#.#.#.#######.#.#.#################.#######.#
#...#...#.......#...#.....#.........#...#.#.#...#.#.#.#.#.#...#.#...#..E#.#...#.#...#.#...#.#.#.#...#...#.....#...###...............#.....#.#
#######.#.#####.#####.#####.#########.#.#.#.#.###.#.#.#.#.#.###.#.#.#.###.#.###.#.###.#.#.#.#.#.#######.#.###########.###############.###.#.#
#...###.#.#.....#...#.#.....#.......#.#.#.#.#...#.#.#.#.#.#.#...#.#...###.#...#.#.#...#.#.#.#.#.###.....#.............#...........#...###...#
#.#.###.#.#.#####.#.#.#.#####.#####.#.#.#.#.###.#.#.#.#.#.#.#.###.#######.###.#.#.#.###.#.#.#.#.###.###################.#########.#.#########
#.#.#...#.#...#...#...#.......#...#.#.#...#...#.#.#.#...#.#.#...#.....#...#...#.#.#...#.#.#.#.#...#...#...#...#...#...#.........#.#.#.......#
#.#.#.###.###.#.###############.#.#.#.#######.#.#.#.#####.#.###.#####.#.###.###.#.###.#.#.#.#.###.###.#.#.#.#.#.#.#.#.#########.#.#.#.#####.#
#.#.#...#.#...#.#...#...........#...#...#...#...#.#...#...#...#.#...#.#.#...#...#.#...#.#.#.#.#...#...#.#.#.#.#.#...#.#...#.....#...#.#.....#
#.#.###.#.#.###.#.#.#.#################.#.#.#####.###.#.#####.#.#.#.#.#.#.###.###.#.###.#.#.#.#.###.###.#.#.#.#.#####.#.#.#.#########.#.#####
#.#...#.#.#.....#.#...#...............#...#.#.....#...#.#...#.#.#.#.#.#...#...#...#...#.#.#.#.#...#...#.#.#.#.#...###...#...###...###.#.#...#
#.###.#.#.#######.#####.#############.#####.#.#####.###.#.#.#.#.#.#.#.#####.###.#####.#.#.#.#.###.###.#.#.#.#.###.#############.#.###.#.#.#.#
#...#.#...#...###...#...#.............#.....#.....#.###.#.#...#.#.#...#.....#...###...#.#.#.#...#...#.#.#.#.#...#.........#...#.#.....#...#.#
###.#.#####.#.#####.#.###.#############.#########.#.###.#.#####.#.#####.#####.#####.###.#.#.###.###.#.#.#.#.###.#########.#.#.#.###########.#
#...#...#...#.......#...#...#...#...#...#.........#...#.#.#.....#.#...#...#...#...#.....#...#...#...#...#...#...#...#...#...#...#...#.......#
#.#####.#.#############.###.#.#.#.#.#.###.###########.#.#.#.#####.#.#.###.#.###.#.###########.###.###########.###.#.#.#.#########.#.#.#######
#.#...#...#.........#...#...#.#.#.#.#...#...#.....#...#.#.#.#...#...#...#.#.....#.....###...#.#...#...#...###...#.#.#.#...#.......#.#.....###
#.#.#.#####.#######.#.###.###.#.#.#.###.###.#.###.#.###.#.#.#.#.#######.#.###########.###.#.#.#.###.#.#.#.#####.#.#.#.###.#.#######.#####.###
#...#.....#.#.....#.#.###...#.#...#.#...#...#...#.#.#...#.#...#...#...#.#.#...#.....#.#...#...#.....#...#.....#.#.#.#...#.#.......#.#...#...#
#########.#.#.###.#.#.#####.#.#####.#.###.#####.#.#.#.###.#######.#.#.#.#.#.#.#.###.#.#.#####################.#.#.#.###.#.#######.#.#.#.###.#
#...###...#.#...#...#...###...#.....#...#.#...#.#.#.#.#...#.......#.#...#.#.#...#...#.#.#...#...#.....#...#...#.#.#.#...#...#...#.#.#.#.#...#
#.#.###.###.###.#######.#######.#######.#.#.#.#.#.#.#.#.###.#######.#####.#.#####.###.#.#.#.#.#.#.###.#.#.#.###.#.#.#.#####.#.#.#.#.#.#.#.###
#.#.....#...###...#.....#.......#...#...#.#.#...#...#.#...#...#...#.....#.#...###...#.#.#.#...#.#.###.#.#...###.#.#.#...#...#.#...#...#.#...#
#.#######.#######.#.#####.#######.#.#.###.#.#########.###.###.#.#.#####.#.###.#####.#.#.#.#####.#.###.#.#######.#.#.###.#.###.#########.###.#
#.#.....#.#.......#.....#.....#...#.#...#.#.........#...#.#...#.#...#...#.....#...#...#...###...#...#.#.###.....#.#.....#...#...#...###.#...#
#.#.###.#.#.###########.#####.#.###.###.#.#########.###.#.#.###.###.#.#########.#.###########.#####.#.#.###.#####.#########.###.#.#.###.#.###
#.#.#...#.#.#...#...#...###...#.#...#...#...#.....#.###...#...#.###.#.......###.#...........#...#...#.#...#.#...#...###...#...#...#...#.#...#
#.#.#.###.#.#.#.#.#.#.#####.###.#.###.#####.#.###.#.#########.#.###.#######.###.###########.###.#.###.###.#.#.#.###.###.#.###.#######.#.###.#
#...#.....#.#.#.#.#.#.#.....#...#...#.....#...#...#...###...#...#...#.....#.....#.....#...#.###.#.###.#...#...#...#.....#.###.....#...#.....#
###########.#.#.#.#.#.#.#####.#####.#####.#####.#####.###.#.#####.###.###.#######.###.#.#.#.###.#.###.#.#########.#######.#######.#.#########
#...........#.#.#.#.#.#.....#...#...#...#.....#.....#...#.#.....#...#...#.#...#...#...#.#.#.#...#...#.#.###.....#...#...#...#.....#.........#
#.###########.#.#.#.#.#####.###.#.###.#.#####.#####.###.#.#####.###.###.#.#.#.#.###.###.#.#.#.#####.#.#.###.###.###.#.#.###.#.#############.#
#...#.....#...#.#.#.#.#.....#...#.#...#...#...#...#.....#.....#.....#...#.#.#.#...#.#...#...#...#...#.#...#.#...#...#.#.#...#.#...#.....#...#
###.#.###.#.###.#.#.#.#.#####.###.#.#####.#.###.#.###########.#######.###.#.#.###.#.#.#########.#.###.###.#.#.###.###.#.#.###.#.#.#.###.#.###
#...#.#...#...#.#.#.#.#.#...#...#.#.#.....#.....#...#.........#.....#...#.#.#.#...#.#.#.........#...#...#...#.#...#...#.#.#...#.#.#.#...#...#
#.###.#.#####.#.#.#.#.#.#.#.###.#.#.#.#############.#.#########.###.###.#.#.#.#.###.#.#.###########.###.#####.#.###.###.#.#.###.#.#.#.#####.#
#.....#.......#...#...#...#.....#...#...............#...........###.....#...#...###...#.............###.......#.....###...#.....#...#.......#
#############################################################################################################################################
"""


from time import time
start = time()
for K, data in inputs():
    solve(K, data.strip())
print(f"Elapsed time: {time() - start:.2f} seconds")
